# Summary: Invokes CCP pipeline job
# Description: This pipeline job will invoke the CCP pipeline to deploy any resources that requires post deployment configuration
# Eg: DNS records, firewall rules, network rules etc.

parameters:
  serviceConnection: ''
  resource: ''
  templateParameterFilePath: ''
  displayName: ''

jobs:
- job: InvokeCCP_${{ parameters.resource }}
  displayName: InvokeCCP_${{ parameters.resource }}
  steps:
  - checkout: self

  - ${{ each value in parameters.invokeCCPArgs  }}:
  # - task: AzurePowerShell@5
  #   displayName: 'Deploy'
  #   inputs:
  #     azureSubscription: '$(serviceConnection)'
  #     ScriptType: 'FilePath'
  #     ScriptPath: '$(System.DefaultWorkingDirectory)/trigger-ccp-pipeline.ps1'
  #     ScriptArguments: '-ParameterFile $(templateParameterFilePath) -PipelineStage "buildAndDeploy"'
  #     azurePowerShellVersion: 'LatestVersion'

  - script: echo "${{ parameters.displayName }}""
